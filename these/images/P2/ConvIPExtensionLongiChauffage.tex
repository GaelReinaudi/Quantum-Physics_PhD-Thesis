\documentclass[11pt, a4paper, french]{thloria}%{article}
\input{../../Packages_Gael}

%%% Pour n'avoir que l'image tikz ! ! !
\usepackage[active,tightpage]{preview}\PreviewEnvironment{tikzpicture} 

\usepackage[np,autolanguage]{numprint}

\newcommand{\ConvIPDessinBparaModuleDebut}[1]{
\begin{scope}[join=bevel]
\tkzInit[xmin=-1,xmax=40,xstep=5,ymin=-0.1,ymax=2.3,ystep=1]
\tkzX[orig, noticks, label={$z$}]%, poslabel=0ex]
\tkzY[label={$\ConvUaxe$}, noticks]%, poslabel=-4ex]

\tkzFct[color=red, samples=100](0..20){
0}
\tkzFct[color=red, samples=100](27..40){
\ConvFonctionChampIPModule{\x+10}{#1}}

\draw[red, -latex'](29/5,0/5)--++(0,9/5);
\draw[red, -latex'](30.5/5,0/5)--++(0,5/5);
\draw[red, -latex'](32/5,0/5)--++(0,2/5);
\draw[red, -latex'](38/5,0/5)--++(0,9/5);
\draw[red, -latex'](36.5/5,0/5)--++(0,5/5);
\draw[red, -latex'](35/5,0/5)--++(0,2/5);

\end{scope}}

\def\time{0.6}

\begin{document}
\pagestyle{empty}
\input{../../New_Commande_Gael}

\footnotesize

\begin{tikzpicture}[scale=0.5]

\ConvIPDessinBparaModuleDebut{\time}

\begin{scope}[xscale=0.2, yscale=0.2]    
\def\numAt{20}
\def\sizeCloud{7}
\pgfmathsetseed{245}
\foreach \xx in {1,...,\numAt}{
	\pgfmathparse{1*(rand)*(\sizeCloud/2*\numAt/\numAt)+10}
	\let\XX\pgfmathresult
	\pgfmathparse{0}%5*\ConvFonctionChampIPModulePourPGFparser{\XX}{\time}}
	\let\YY\pgfmathresult
	\pgfmathparse{\XX+23.5}
	\let\XXp\pgfmathresult
	\pgfmathparse{5*\ConvFonctionChampIPModulePourPGFparser{\XXp+10}{\time}}
	\let\YYp\pgfmathresult

	\shade[ball color=blue] (\XX,\YY) circle (0.50cm);
	\shade[ball color=blue] (\XXp,\YYp) circle (0.50cm);
}
%\draw[latex'-latex'](29,6.4*5)--++(10,0)node[above, pos=0.5]{$\cm{10}$};

%\draw[blue, -latex', line width=0.05cm](10,2)--++(5,0)node[above, pos=0]{$\vinj$};
\end{scope}

\begin{scope}[yshift=4cm]    
\ConvIPDessinBparaModuleDebut{\time}

\draw[red, -latex', line width=0.05cm](33.5/5,12/5)--++(5/5,0)
node[above, pos=0]{$\vconv=\vinj$};

\begin{scope}[xscale=0.2, yscale=0.2]    
\def\numAt{20}
\def\sizeCloud{2}
\pgfmathsetseed{245}
\foreach \xx in {1,...,\numAt}{
	\pgfmathparse{1*(rand)*(\sizeCloud/2*\numAt/\numAt)+10}
	\let\XX\pgfmathresult
	\pgfmathparse{5*\ConvFonctionChampIPModulePourPGFparser{\XX}{\time}}
	\let\YY\pgfmathresult
	\pgfmathparse{\XX+23.5}
	\let\XXp\pgfmathresult
	\pgfmathparse{5*\ConvFonctionChampIPModulePourPGFparser{\XXp}{\time}}
	\let\YYp\pgfmathresult
	
	\shade[ball color=blue] (\XX,\YY) circle (0.50cm);
	\shade[ball color=blue] (\XXp,\YYp) circle (0.50cm);
}
\draw[blue, -latex', line width=0.05cm](10,2)--++(5,0)node[above, pos=0]{$\vinj$};
\end{scope}
\end{scope}
    
\end{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
\end{document}